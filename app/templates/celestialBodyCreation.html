{% extends "base.html" %}
{% block content %}
{% load static %}

<div class="container mt-5">
  <h2>{{ title }}</h2>

  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="form-group mb-3">
      <label for="objectType">Tipo de corpo celeste</label>
      <select id="objectType" name="objectType" class="form-control">
        <option value="">Selecione...</option>
        <option value="galaxy">Gal√°xia</option>
        <option value="star">Estrela</option>
        <option value="planet">Planeta</option>
      </select>
    </div>

    <div id="galaxyForm" class="bodyForm" style="display:none;">
      {{ galaxy_form.as_p }}
    </div>

    <div id="starForm" class="bodyForm" style="display:none;">
      {{ star_form.as_p }}
    </div>

    <div id="planetForm" class="bodyForm" style="display:none;">
      {{ planet_form.as_p }}
    </div>

    <button type="submit" class="btn btn-primary">Salvar</button>
  </form>

  {{ form.non_field_errors }}
  {% for field in form %}
    {{ field.label_tag }} {{ field }}
    {{ field.errors }}
  {% endfor %}
</div>

<script>
  const select = document.getElementById('objectType');
  const forms = document.querySelectorAll('.bodyForm');

  select.addEventListener('change', function() {
    forms.forEach(f => f.style.display = 'none'); 
    if (this.value) {
      document.getElementById(this.value + 'Form').style.display = 'block';
    }
  });
</script>
{% endblock %}